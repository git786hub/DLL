
set echo on
set linesize 1000
set pagesize 300
set trimspool on

spool %TEMP%\WR_VALIDATION_OVERRIDE.log
--**************************************************************************************
--SCRIPT NAME: WR_VALIDATION_OVERRIDE.sql
--**************************************************************************************
-- AUTHOR				: SAGARWAL
-- DATE					: 08-MAR-2018
-- CYCLE				: 6
-- JIRA NUMBER			:
-- PRODUCT VERSION		: 10.2.04
-- PRJ IDENTIFIER		: G/TECHNOLOGY - ONCOR
-- PROGRAM DESC			:
-- SOURCE DATABASE		:
--**************************************************************************************
-- Script Body
--**************************************************************************************

-- {Add script code}
-- Check for the existence of object and then drop if they exist.
declare
    tmpCnt number;
begin
    select count(*) into tmpCnt from all_synonyms where synonym_name = 'WR_VALIDATION_OVERRIDE';
    if tmpCnt > 0 then
        execute immediate 'DROP PUBLIC SYNONYM "WR_VALIDATION_OVERRIDE"';
    end if;
    
    select count(*) into tmpCnt from all_tables where table_name = 'WR_VALIDATION_OVERRIDE';
    if tmpCnt > 0 then
        execute immediate 'DROP TABLE "GIS_ONC"."WR_VALIDATION_OVERRIDE"';
    end if;
end;
/

--------------------------------------------------------
--  DDL for Table WR_VALIDATION_OVERRIDE
--------------------------------------------------------

  CREATE TABLE "GIS_ONC"."WR_VALIDATION_OVERRIDE" 
   (
	"ID" NUMBER, 
	"RULE_ID" NUMBER(5,0), 
	"RULE_NM" VARCHAR2(50), 
	"G3E_IDENTIFIER" VARCHAR2(30), 
	"G3E_FNO" NUMBER(5,0), 
	"G3E_FID" NUMBER(10,0), 
	"STRUCTURE_ID" VARCHAR2(16), 
	"ERROR_MSG" VARCHAR2(400), 
	"OVERRIDE_UID" VARCHAR2(30), 
	"OVERRIDE_COMMENTS" VARCHAR2(1000), 
	"OVERRIDE_D" DATE
   );

   CREATE PUBLIC SYNONYM "WR_VALIDATION_OVERRIDE" FOR "GIS_ONC"."WR_VALIDATION_OVERRIDE";
   
   COMMENT ON COLUMN "GIS_ONC"."WR_VALIDATION_OVERRIDE"."ID" IS 'Unique identifier';
   COMMENT ON COLUMN "GIS_ONC"."WR_VALIDATION_OVERRIDE"."RULE_ID" IS 'Rule identifier; foreign key to WR_VALIDATION_RULE';
   COMMENT ON COLUMN "GIS_ONC"."WR_VALIDATION_OVERRIDE"."G3E_IDENTIFIER" IS 'Job identifier (same as WR number for WR jobs)';
   COMMENT ON COLUMN "GIS_ONC"."WR_VALIDATION_OVERRIDE"."G3E_FNO" IS 'Feature Number of affected feature';
   COMMENT ON COLUMN "GIS_ONC"."WR_VALIDATION_OVERRIDE"."G3E_FID" IS 'Feature Identifier of affected feature';
   COMMENT ON COLUMN "GIS_ONC"."WR_VALIDATION_OVERRIDE"."STRUCTURE_ID" IS 'Structure ID of affected feature (formerly FLN)';
   COMMENT ON COLUMN "GIS_ONC"."WR_VALIDATION_OVERRIDE"."ERROR_MSG" IS 'Error message generated by validation rule';
   COMMENT ON COLUMN "GIS_ONC"."WR_VALIDATION_OVERRIDE"."OVERRIDE_UID" IS 'User ID of designer performing override';
   COMMENT ON COLUMN "GIS_ONC"."WR_VALIDATION_OVERRIDE"."OVERRIDE_COMMENTS" IS 'Designer’s reason for overriding';
   COMMENT ON COLUMN "GIS_ONC"."WR_VALIDATION_OVERRIDE"."OVERRIDE_D" IS 'Date/time of override';

   
--**************************************************************************************
-- End Script Body
--**************************************************************************************
spool off;
